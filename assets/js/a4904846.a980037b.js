"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[4085],{9301:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>m});var n=a(58168),i=(a(96540),a(15680));const l={id:"changelog",title:"Changelog",sidebar_position:2,hide_title:!0},r=void 0,o={unversionedId:"docs/changelog",id:"docs/changelog",title:"Changelog",description:"TODO: update to final version",source:"@site/docs/docs/changelog.md",sourceDirName:"docs",slug:"/docs/changelog",permalink:"/docs/docs/changelog",draft:!1,editUrl:"https://github.com/facebookresearch/balance/tree/main/website/docs/docs/changelog.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"changelog",title:"Changelog",sidebar_position:2,hide_title:!0},sidebar:"docsSidebar",previous:{title:"Overview",permalink:"/docs/docs/overview"},next:{title:"General Framework",permalink:"/docs/docs/general_framework/"}},d={},m=[{value:"New Features",id:"new-features",level:2},{value:"Bug Fixes",id:"bug-fixes",level:2},{value:"Tests",id:"tests",level:2},{value:"Contributors",id:"contributors",level:2},{value:"New Features",id:"new-features-1",level:2},{value:"Documentation",id:"documentation",level:2},{value:"Code Quality &amp; Refactoring",id:"code-quality--refactoring",level:2},{value:"Bug Fixes",id:"bug-fixes-1",level:2},{value:"Tests",id:"tests-1",level:2},{value:"Contributors",id:"contributors-1",level:2},{value:"New Features",id:"new-features-2",level:2},{value:"Documentation",id:"documentation-1",level:2},{value:"Bug Fixes",id:"bug-fixes-2",level:2},{value:"New Features",id:"new-features-3",level:2},{value:"Contributors",id:"contributors-2",level:2},{value:"New Features",id:"new-features-4",level:2},{value:"Bug Fixes",id:"bug-fixes-3",level:2},{value:"Tests",id:"tests-2",level:2},{value:"Documentation",id:"documentation-2",level:2},{value:"Contributors",id:"contributors-3",level:2},{value:"New Features",id:"new-features-5",level:2},{value:"Misc",id:"misc",level:2},{value:"Contributors",id:"contributors-4",level:2},{value:"Bug Fixes",id:"bug-fixes-4",level:2},{value:"Documentation",id:"documentation-3",level:2},{value:"News",id:"news",level:2},{value:"New Features",id:"new-features-6",level:2},{value:"Bug Fixes",id:"bug-fixes-5",level:2},{value:"Documentation",id:"documentation-4",level:2},{value:"Contributors",id:"contributors-5",level:2},{value:"New Features",id:"new-features-7",level:2},{value:"Misc",id:"misc-1",level:2},{value:"Documentation",id:"documentation-5",level:2},{value:"Contributors",id:"contributors-6",level:2},{value:"New Features",id:"new-features-8",level:2},{value:"Bug Fixes",id:"bug-fixes-6",level:2},{value:"Misc",id:"misc-2",level:2},{value:"Contributors",id:"contributors-7",level:2},{value:"New Features",id:"new-features-9",level:2},{value:"Contributors",id:"contributors-8",level:2},{value:"New Features",id:"new-features-10",level:2},{value:"Documentation",id:"documentation-6",level:2},{value:"Contributors",id:"contributors-9",level:2},{value:"New Features",id:"new-features-11",level:2},{value:"Bug Fixes",id:"bug-fixes-7",level:2},{value:"Contributors",id:"contributors-10",level:2},{value:"Bug Fixes",id:"bug-fixes-8",level:2},{value:"Documentation",id:"documentation-7",level:2},{value:"Contributors",id:"contributors-11",level:2},{value:"New Features",id:"new-features-12",level:2},{value:"Bug Fixes",id:"bug-fixes-9",level:2},{value:"Documentation",id:"documentation-8",level:2},{value:"Contributors",id:"contributors-12",level:2},{value:"New Features",id:"new-features-13",level:2},{value:"Bug Fixes",id:"bug-fixes-10",level:2},{value:"Documentation",id:"documentation-9",level:2},{value:"Misc",id:"misc-3",level:2},{value:"Contributors",id:"contributors-13",level:2},{value:"Summary",id:"summary",level:2},{value:"Contributors",id:"contributors-14",level:2}],s={toc:m};function p(e){let{components:t,...a}=e;return(0,i.mdx)("wrapper",(0,n.A)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"013x-tbd"},"0.13.x (TBD)"),(0,i.mdx)("blockquote",null,(0,i.mdx)("p",{parentName:"blockquote"},"TODO: update to final version")),(0,i.mdx)("h2",{id:"new-features"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Enhanced adjusted sample summary output")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"The ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.__str__()")," method now displays adjustment details when a sample\nis adjusted, including adjustment method, weight trimming parameters (mean\nratio and percentile), design effect (Deff), and effective sample size when\navailable. This provides quick diagnostics at a glance when printing\nadjusted samples. The helper method ",(0,i.mdx)("inlineCode",{parentName:"li"},"_quick_adjustment_details()"),"\ncentralizes this logic for reuse across presentation helpers like\n",(0,i.mdx)("inlineCode",{parentName:"li"},"summary()")," (",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/194"},"#194"),",\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/issues/57"},"#57"),"). Tests are\nadded."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Richer ",(0,i.mdx)("inlineCode",{parentName:"strong"},"Sample.summary()")," diagnostics")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"The adjusted sample summary now groups covariate diagnostics together,\nexpands weight diagnostics to report design effect alongside effective\nsample proportion (ESSP) and effective sample size (ESS), and surfaces\nweighted outcome means when available. This makes the printed summary a\nconcise snapshot of covariate balance, weight health, and outcome behavior\npost-adjustment. When the design effect cannot be computed reliably, the\nsummary now reports it as unavailable instead of emitting misleading\neffective sample diagnostics."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Warning of high-cardinality categorical features used as covariates in\n.adjust()")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Added detection and warnings for high-cardinality categorical features\n(object, category, string dtypes) before weight fitting when using\n.adjust(). Categorical features where \u226580% of non-missing values are unique\nare flagged as potentially not providing meaningful signal. This helps\nidentify problematic columns such as user IDs or other high-cardinality\nidentifiers that may lead to poor weighting performance. Numeric features\nare not checked, as high cardinality is expected and not problematic for\nthem (",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/195"},"#195"),",\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/issues/65"},"#65"),"). Tests are\nadded."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Ignored column handling for Sample inputs")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.from_frame")," now accepts an ",(0,i.mdx)("inlineCode",{parentName:"li"},"ignore_columns")," parameter for columns\nthat should remain on the underlying dataframe but be excluded from\ncovariate selection and outcome statistics. Ignored columns can be retrieved\nvia the new ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.ignored_columns()")," helper, enabling metadata passthrough\nwithout affecting adjustment or outcome calculations. Validation prevents\noverlaps with id/weight/outcome columns, enforces string column names, and\nraises clear errors for missing columns while deduplicating ignore lists in\norder-preserving fashion."),(0,i.mdx)("li",{parentName:"ul"},"The ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.df")," view now includes ignored columns (after outcomes and\nweights) so downstream consumers receive the full annotated input when\npulling the consolidated dataframe.")))),(0,i.mdx)("h2",{id:"bug-fixes"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Early validation of null weight inputs"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.from_frame")," now raises a descriptive ",(0,i.mdx)("inlineCode",{parentName:"li"},"ValueError")," when weights\ncontain ",(0,i.mdx)("inlineCode",{parentName:"li"},"None"),", ",(0,i.mdx)("inlineCode",{parentName:"li"},"NaN"),", or ",(0,i.mdx)("inlineCode",{parentName:"li"},"pd.NA")," values. The error includes the total count\nof offending rows and a preview of the affected observations to simplify\ndebugging bad inputs."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Percentile weight trimming enforces requested lower bounds across platforms"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"trim_weights()")," now computes winsorization thresholds directly via\npercentile quantiles with explicit clipping bounds, ensuring lower-tail\ntrimming respects the requested cutoff on all supported Python and NumPy\nversions."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Breaking change:")," percentile-based clipping may shift by roughly one\nobservation at typical limits (for example, 1% clipping on 1..100 now\nyields bounds of 3 and 98 instead of 2 and 99). If you need to preserve the\nprevious behavior, lower the requested percentiles slightly to reproduce\nearlier cut points."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"IPW diagnostics reflect model settings and avoid deprecated penalties"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"The IPW diagnostics now report the classifier's ",(0,i.mdx)("inlineCode",{parentName:"li"},"multi_class")," setting\nexactly once and pull key scalar hyperparameters from estimator\nparameters (including ",(0,i.mdx)("inlineCode",{parentName:"li"},"l1_ratio")," even when older sklearn versions store\nit as ",(0,i.mdx)("inlineCode",{parentName:"li"},"None"),"). The default sklearn logistic regression is also\ninitialized without the deprecated ",(0,i.mdx)("inlineCode",{parentName:"li"},"penalty")," argument, eliminating noisy\ndeprecation warnings during test runs."),(0,i.mdx)("li",{parentName:"ul"},"Diagnostics now normalize scalar values (including the regularization\nstrength) to floats and avoid emitting empty performance sections when no\nscalar performance metrics are present."),(0,i.mdx)("li",{parentName:"ul"},"IPW model summaries now explicitly record only deterministic attributes\n(like ",(0,i.mdx)("inlineCode",{parentName:"li"},"n_iter_")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"intercept_"),") and deduplicate metric entries so\nmetric counts remain stable across supported sklearn versions.")))),(0,i.mdx)("h2",{id:"tests"},"Tests"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Added Windows and macOS CI testing support"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Expanded GitHub Actions test matrix to run on ",(0,i.mdx)("inlineCode",{parentName:"li"},"ubuntu-latest"),",\n",(0,i.mdx)("inlineCode",{parentName:"li"},"macos-latest"),", and ",(0,i.mdx)("inlineCode",{parentName:"li"},"windows-latest")," for all supported Python versions\n(3.9-3.14), ensuring cross-platform compatibility."),(0,i.mdx)("li",{parentName:"ul"},"Upgraded GitHub Actions versions (",(0,i.mdx)("inlineCode",{parentName:"li"},"actions/checkout@v5"),",\n",(0,i.mdx)("inlineCode",{parentName:"li"},"actions/setup-python@v5"),", ",(0,i.mdx)("inlineCode",{parentName:"li"},"actions/setup-node@v5"),") for improved reliability\nand security."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Cross-platform test fixes to enable Windows and macOS support:"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Added a shared ",(0,i.mdx)("inlineCode",{parentName:"li"},"tempfile_path()")," context manager in ",(0,i.mdx)("inlineCode",{parentName:"li"},"testutil.py")," that\nproperly handles temporary file creation and cleanup across platforms,\nresolving Windows file-locking issues in CSV-related tests for both\n",(0,i.mdx)("inlineCode",{parentName:"li"},"BalanceDF")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample"),"."),(0,i.mdx)("li",{parentName:"ul"},"Configured tests to use the non-interactive matplotlib Agg backend via\n",(0,i.mdx)("inlineCode",{parentName:"li"},"conftest.py"),", eliminating Tk dependencies and display requirements in\nplotting tests.")))))),(0,i.mdx)("h2",{id:"contributors"},"Contributors"),(0,i.mdx)("p",null,"@neuralsorcerer, @talgalili, @wesleytlee"),(0,i.mdx)("h1",{id:"0130-2025-12-02"},"0.13.0 (2025-12-02)"),(0,i.mdx)("h2",{id:"new-features-1"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Propensity modeling beyond static logistic regression"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},".adjust(method='ipw')")," now accepts any sklearn classifier via the ",(0,i.mdx)("inlineCode",{parentName:"li"},"model"),"\nargument, enabling the use of models like random forests and gradient\nboosting while preserving all existing trimming and diagnostic features.\nDense-only estimators and models without linear coefficients are fully\nsupported. Propensity probabilities are stabilized to avoid numerical\nissues."),(0,i.mdx)("li",{parentName:"ul"},"Allow customization of logistic regression by passing a configured\n:class:",(0,i.mdx)("inlineCode",{parentName:"li"},"~sklearn.linear_model.LogisticRegression")," instance through the\n",(0,i.mdx)("inlineCode",{parentName:"li"},"model")," argument. Also, the CLI now accepts\n",(0,i.mdx)("inlineCode",{parentName:"li"},"--ipw_logistic_regression_kwargs")," JSON to build that estimator directly for\ncommand-line workflows."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Covariate diagnostics"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Added KL divergence calculations for covariate comparisons (numeric and\none-hot categorical), exposed via ",(0,i.mdx)("inlineCode",{parentName:"li"},"sample.covars().kld()")," alongside\nlinked-sample aggregation support."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Weighting Methods"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"rake()")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"poststratify()")," now honour ",(0,i.mdx)("inlineCode",{parentName:"li"},"weight_trimming_mean_ratio")," and\n",(0,i.mdx)("inlineCode",{parentName:"li"},"weight_trimming_percentile"),", trimming and renormalising weights through the\nenhanced ",(0,i.mdx)("inlineCode",{parentName:"li"},"trim_weights(..., target_sum_weights=...)")," API so the documented\nparameters work as expected\n(",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/147"},"#147"),").")))),(0,i.mdx)("h2",{id:"documentation"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added comprehensive post-stratification tutorial notebook\n(",(0,i.mdx)("inlineCode",{parentName:"li"},"balance_quickstart_poststratify.ipynb"),")\n(",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/141"},"#141"),",\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/142"},"#142"),",\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/143"},"#143"),")."),(0,i.mdx)("li",{parentName:"ul"},"Expanded poststratify docstring with clear examples and improved statistical\nmethods documentation\n(",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/141"},"#141"),")."),(0,i.mdx)("li",{parentName:"ul"},"Added project badges to README for build status, Python version support, and\nrelease tracking\n(",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/145"},"#145"),")."),(0,i.mdx)("li",{parentName:"ul"},"Added example of using custom logistic regression and custom sklearn\nclassifier usage in (",(0,i.mdx)("inlineCode",{parentName:"li"},"balance_quickstart.ipynb"),")."),(0,i.mdx)("li",{parentName:"ul"},"Shorten the welcome message (for when importing the package).")),(0,i.mdx)("h2",{id:"code-quality--refactoring"},"Code Quality & Refactoring"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Raking algorithm refactor")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Removed ",(0,i.mdx)("inlineCode",{parentName:"li"},"ipfn")," dependency and replaced with a vectorized NumPy\nimplementation (",(0,i.mdx)("inlineCode",{parentName:"li"},"_run_ipf_numpy"),") for iterative proportional fitting,\nresulting in significant performance improvements and eliminating external\ndependency (",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/135"},"#135"),")."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"IPW method refactoring")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Reduced Cyclomatic Complexity Number (CCN) by extracting repeated code\npatterns into reusable helper functions: ",(0,i.mdx)("inlineCode",{parentName:"li"},"_compute_deviance()"),",\n",(0,i.mdx)("inlineCode",{parentName:"li"},"_compute_proportion_deviance()"),", ",(0,i.mdx)("inlineCode",{parentName:"li"},"_convert_to_dense_array()"),"."),(0,i.mdx)("li",{parentName:"ul"},"Removed manual ASMD improvement calculation and now uses existing\n",(0,i.mdx)("inlineCode",{parentName:"li"},"compute_asmd_improvement()")," from ",(0,i.mdx)("inlineCode",{parentName:"li"},"weighted_comparisons_stats.py")))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Type safety improvements")),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Migrated 32 Python files from ",(0,i.mdx)("inlineCode",{parentName:"li"},"# pyre-unsafe")," to ",(0,i.mdx)("inlineCode",{parentName:"li"},"# pyre-strict")," mode,\ncovering core modules, statistics, weighting methods, datasets, and test\nfiles"),(0,i.mdx)("li",{parentName:"ul"},"Modernized type hints to PEP 604 syntax (",(0,i.mdx)("inlineCode",{parentName:"li"},"X | Y")," instead of ",(0,i.mdx)("inlineCode",{parentName:"li"},"Union[X, Y]"),")\nacross 11 files for improved readability and Python 3.10+ alignment"),(0,i.mdx)("li",{parentName:"ul"},"Type alias definitions in ",(0,i.mdx)("inlineCode",{parentName:"li"},"typing.py")," retain ",(0,i.mdx)("inlineCode",{parentName:"li"},"Union")," syntax for Python 3.9\ncompatibility"),(0,i.mdx)("li",{parentName:"ul"},"Enhanced plotting function type safety with ",(0,i.mdx)("inlineCode",{parentName:"li"},"TypedDict")," definitions and\nproper type narrowing"),(0,i.mdx)("li",{parentName:"ul"},"Replaced assert-based type narrowing with ",(0,i.mdx)("inlineCode",{parentName:"li"},"_verify_value_type()")," helper for\nbetter error messages and pyre-strict compliance"))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Renamed Balance"),(0,i.mdx)("em",{parentName:"p"},"DF to BalanceDF"),"*","*","*","*"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"BalanceCovarsDF to BalanceDFCovars"),(0,i.mdx)("li",{parentName:"ul"},"BalanceOutcomesDF to BalanceDFOutcomes"),(0,i.mdx)("li",{parentName:"ul"},"BalanceWeightsDF to BalanceDFWeights")))),(0,i.mdx)("h2",{id:"bug-fixes-1"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Utility Functions"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Fixed ",(0,i.mdx)("inlineCode",{parentName:"li"},"quantize()")," to preserve column ordering and use proper TypeError\nexceptions (",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/133"},"#133"),")"))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Statistical Functions"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Fixed division by zero in ",(0,i.mdx)("inlineCode",{parentName:"li"},"asmd_improvement()")," when ",(0,i.mdx)("inlineCode",{parentName:"li"},"asmd_mean_before")," is\nzero, now returns ",(0,i.mdx)("inlineCode",{parentName:"li"},"0.0")," for 0% improvement"))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"CLI & Infrastructure"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Replaced deprecated argparse FileType with pathlib.Path\n(",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/pull/134"},"#134"),")"))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Weight Trimming"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Fixed ",(0,i.mdx)("inlineCode",{parentName:"li"},"trim_weights()")," to consistently return ",(0,i.mdx)("inlineCode",{parentName:"li"},"pd.Series")," with\n",(0,i.mdx)("inlineCode",{parentName:"li"},"dtype=np.float64")," and preserve original index across both trimming methods"),(0,i.mdx)("li",{parentName:"ul"},"Fixed percentile-based winsorization edge case: ",(0,i.mdx)("inlineCode",{parentName:"li"},"_validate_limit()")," now\nautomatically adjusts limits to prevent floating-point precision issues\n(",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/issues/144"},"#144"),")"),(0,i.mdx)("li",{parentName:"ul"},"Enhanced documentation for ",(0,i.mdx)("inlineCode",{parentName:"li"},"trim_weights()")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"_validate_limit()")," with\nclearer examples and explanations")))),(0,i.mdx)("h2",{id:"tests-1"},"Tests"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Enhanced test coverage for weight trimming with\n",(0,i.mdx)("inlineCode",{parentName:"li"},"test_trim_weights_return_type_consistency")," and 11 comprehensive tests for\n",(0,i.mdx)("inlineCode",{parentName:"li"},"_validate_limit()")," covering edge cases, error conditions, and boundary\nconditions")),(0,i.mdx)("h2",{id:"contributors-1"},"Contributors"),(0,i.mdx)("p",null,"@neuralsorcerer, @talgalili, @wesleytlee"),(0,i.mdx)("h1",{id:"0121-2025-11-03"},"0.12.1 (2025-11-03)"),(0,i.mdx)("h2",{id:"new-features-2"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added a welcome message when importing the package.")),(0,i.mdx)("h2",{id:"documentation-1"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added 'CHANGELOG' to the docs website.\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/docs/CHANGELOG/"},"https://import-balance.org/docs/docs/CHANGELOG/"))),(0,i.mdx)("h2",{id:"bug-fixes-2"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fixed plotly figures in all the tutorials.\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/"},"https://import-balance.org/docs/tutorials/"))),(0,i.mdx)("h1",{id:"0120-2025-10-14"},"0.12.0 (2025-10-14)"),(0,i.mdx)("h2",{id:"new-features-3"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Support for Python 3.13 + 3.14"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Update setup.py and CI/CD integration to include Python 3.13 and 3.14."),(0,i.mdx)("li",{parentName:"ul"},"Remove upper version constraints from numpy, pandas, scipy, and scikit-learn\ndependencies for Python 3.12+.")))),(0,i.mdx)("h2",{id:"contributors-2"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @wesleytlee"),(0,i.mdx)("h1",{id:"0110-2025-09-24"},"0.11.0 (2025-09-24)"),(0,i.mdx)("h2",{id:"new-features-4"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Python 3.12 support")," - Complete support for Python 3.12 alongside existing\nPython 3.9, 3.10, and 3.11 support (with CI/CD integration).",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Implemented Python version-specific dependency constraints")," - Added\nconditional version ranges for numpy, pandas, scipy, and scikit-learn that\nvary based on Python version (e.g., numpy>=1.21.0,<2.0 for Python <3.12,\nnumpy>=1.24.0,<2.1 for Python >=3.12)"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Pandas compatibility improvements")," - Replaced\n",(0,i.mdx)("inlineCode",{parentName:"li"},"value_counts(dropna=False)")," with ",(0,i.mdx)("inlineCode",{parentName:"li"},"groupby().size()")," in frequency table\ncreation to avoid FutureWarning"),(0,i.mdx)("li",{parentName:"ul"},"Fixed various pandas deprecation warnings and improved DataFrame handling"))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Improved raking algorithm")," - Completely refactored rake weighting from\nDataFrame-based to array-based ipfn algorithm using multi-dimensional arrays\nand itertools for better performance and compatibility with latest Python\nversions. ",(0,i.mdx)("strong",{parentName:"li"},"Variables are now automatically alphabetized")," to ensure\nconsistent results regardless of input order."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"poststratify method enhancement")," - New ",(0,i.mdx)("inlineCode",{parentName:"li"},"strict_matching")," parameter (default\nTrue) handles cases where sample cells are not present in target data. When\nFalse, issues warning and assigns weight 0 to uncovered samples")),(0,i.mdx)("h2",{id:"bug-fixes-3"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Type annotations")," - Enhanced Pyre type hints throughout the codebase,\nparticularly in utility functions"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Sample class improvements")," - Fixed weight type assignment (ensuring float64\ntype), improved DataFrame manipulation with ",(0,i.mdx)("inlineCode",{parentName:"li"},".infer_objects(copy=False)")," for\npandas compatibility, and enhanced weight setting logic"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Website dependencies")," - Updated various website dependencies including\nDocusaurus and related packages")),(0,i.mdx)("h2",{id:"tests-2"},"Tests"),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Comprehensive test refactoring"),", including:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Enhanced test validation")," - Added detailed explanations of test\nmethodologies and expected behaviors in docstrings"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Improved test coverage")," - Tests now include edge cases like NaN handling,\ndifferent data types, and error conditions"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Improved test organization")," (more granular) across all test modules\n(test_stats_and_plots.py, test_balancedf.py, test_ipw.py, test_rake.py,\ntest_cli.py, test_weighted_comparisons_plots.py, test_cbps.py,\ntest_testutil.py, test_adjustment.py, test_util.py, test_sample.py)"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Updated GitHub workflows")," to include Python 3.12 in build and test matrix"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},'Fix 261 "pandas deprecation" warnings!')),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Added type annotations")," - Converted test_balancedf.py to pyre-strict with.")),(0,i.mdx)("h2",{id:"documentation-2"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"GitHub issue template for support questions")," - Added structured template to\nhelp users ask questions about using the balance package")),(0,i.mdx)("h2",{id:"contributors-3"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @wesleytlee, @dependabot"),(0,i.mdx)("h1",{id:"0100-2025-01-06"},"0.10.0 (2025-01-06)"),(0,i.mdx)("h2",{id:"new-features-5"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Dependency on glmnet has been removed, and the ",(0,i.mdx)("inlineCode",{parentName:"li"},"ipw")," method now uses sklearn."),(0,i.mdx)("li",{parentName:"ul"},"The transition to sklearn should enable support for newer python versions\n(3.11) as well as the Windows OS!"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"ipw")," method uses logistic regression with"," ",(0,i.mdx)("a",{parentName:"li",href:"https://internalfb.com/L2"},"L2"),"-","penalties instead of",(0,i.mdx)("a",{parentName:"li",href:"https://internalfb.com/L1"},"L1"),"-","penalties for computational reasons. The transition from glmnet to sklearn\nand use of"," ",(0,i.mdx)("a",{parentName:"li",href:"https://internalfb.com/L2"},"L2"),"-","penalties will lead to slightly different generated weights\ncompared to previous versions of Balance."),(0,i.mdx)("li",{parentName:"ul"},"Unfortunately, the sklearn-based ",(0,i.mdx)("inlineCode",{parentName:"li"},"ipw")," method is generally slower than the\nprevious version by 2-5x. Consider using the new arguments ",(0,i.mdx)("inlineCode",{parentName:"li"},"lambda_min"),",\n",(0,i.mdx)("inlineCode",{parentName:"li"},"lambda_max"),", and ",(0,i.mdx)("inlineCode",{parentName:"li"},"num_lambdas")," for a more efficient search over the ",(0,i.mdx)("inlineCode",{parentName:"li"},"ipw"),"\npenalization space.")),(0,i.mdx)("h2",{id:"misc"},"Misc"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Update license from GPL v2 to\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/blob/main/LICENSE"},"MIT license"),"."),(0,i.mdx)("li",{parentName:"ul"},"Updated Python and package compatibility. Balance is now compatible with\nPython 3.11, but no longer compatible with Python 3.8 due to typing errors.\nBalance is currently incompatible with Python 3.12 due to the removal of\ndistutils.")),(0,i.mdx)("h2",{id:"contributors-4"},"Contributors"),(0,i.mdx)("p",null,"@wesleytlee, @talgalili, @SarigT"),(0,i.mdx)("h1",{id:"091-2023-07-30"},"0.9.1 (2023-07-30)"),(0,i.mdx)("h2",{id:"bug-fixes-4"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fix E721 flake8 issue (see:\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/actions/runs/5704381365/job/15457952704"},"https://github.com/facebookresearch/balance/actions/runs/5704381365/job/15457952704"),")"),(0,i.mdx)("li",{parentName:"ul"},"Remove support for python 3.11 from release.yml")),(0,i.mdx)("h2",{id:"documentation-3"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Added links to presentation given at ISA 2023.")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Fixed misc typos."),(0,i.mdx)("h1",{parentName:"li",id:"090-2023-05-22"},"0.9.0 (2023-05-22)"))),(0,i.mdx)("h2",{id:"news"},"News"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Remove support for python 3.11 due to new test failures. This will be the case\nuntil glmnet will be replaced by sklearn. hopefully before end of year.")),(0,i.mdx)("h2",{id:"new-features-6"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"All plotly functions: add kwargs to pass arguments to update_layout in all\nplotly figures. This is useful to control width and height of the plot. For\nexample, when wanting to save a high resolution of the image."),(0,i.mdx)("li",{parentName:"ul"},"Add a ",(0,i.mdx)("inlineCode",{parentName:"li"},"summary")," methods to ",(0,i.mdx)("inlineCode",{parentName:"li"},"BalanceWeightsDF")," (i.e.:\n",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.weights().summary()"),") to easily get access to summary statistics of\nthe survey weights. Also, it means that ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.diagnostics()")," now uses this\nnew summary method in its internal implementation."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"BalanceWeightsDF.plot")," method now relies on the default ",(0,i.mdx)("inlineCode",{parentName:"li"},"BalanceDF.plot"),"\nmethod. This means that instead of a static seaborn kde plot we'll get an\ninteractive plotly version.")),(0,i.mdx)("h2",{id:"bug-fixes-5"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"datasets",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Remove a no-op in ",(0,i.mdx)("inlineCode",{parentName:"li"},"load_data")," and accommodate deprecation of pandas syntax\nby using a list rather than a set when selecting df columns (thanks @ahakso\nfor the PR)."),(0,i.mdx)("li",{parentName:"ul"},"Make the outcome variable (",(0,i.mdx)("inlineCode",{parentName:"li"},"happiness"),") be properly displayed in the\ntutorials (so we can see the benefit of the weighting process). This\nincluded fixing the simulation code in the target."))),(0,i.mdx)("li",{parentName:"ul"},"Fix ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.outcomes().summary()")," so it will output the ci columns without\ntruncating them.")),(0,i.mdx)("h2",{id:"documentation-4"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fix text based on updated from version 0.7.0 and 0.8.0.",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/docs/general_framework/adjusting_sample_to_population/"},"https://import-balance.org/docs/docs/general_framework/adjusting_sample_to_population/")))),(0,i.mdx)("li",{parentName:"ul"},"Fix tutorials to include the outcome in the target.")),(0,i.mdx)("h2",{id:"contributors-5"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @SarigT, @ahakso"),(0,i.mdx)("h1",{id:"080-2023-04-26"},"0.8.0 (2023-04-26)"),(0,i.mdx)("h2",{id:"new-features-7"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Add ",(0,i.mdx)("inlineCode",{parentName:"li"},"rake")," method to .adjust (currently in beta, given that it doesn't handles\nmarginal target as input)."),(0,i.mdx)("li",{parentName:"ul"},"Add a new function ",(0,i.mdx)("inlineCode",{parentName:"li"},"prepare_marginal_dist_for_raking")," - to take in a dict of\nmarginal proportions and turn them into a pandas DataFrame. This can serve as\nan input target population for raking.")),(0,i.mdx)("h2",{id:"misc-1"},"Misc"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"The ",(0,i.mdx)("inlineCode",{parentName:"li"},"ipw")," function now gets max_de=None as default (instead of 1.5). This\nversion is faster, and the user can still choose a threshold as desired."),(0,i.mdx)("li",{parentName:"ul"},"Adding hex stickers graphics files")),(0,i.mdx)("h2",{id:"documentation-5"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"New section on\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/docs/statistical_methods/rake/"},"raking.")),(0,i.mdx)("li",{parentName:"ul"},"New notebook (in the tutorial section):",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/quickstart_rake/"},(0,i.mdx)("strong",{parentName:"a"},"quickstart_rake"))," -\nlike the\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/quickstart/"},(0,i.mdx)("strong",{parentName:"a"},"quickstart")),"\ntutorial, but shows how to use the rake (raking) algorithm and compares the\nresults to IPW (logistic regression with LASSO).")))),(0,i.mdx)("h2",{id:"contributors-6"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @SarigT"),(0,i.mdx)("h1",{id:"070-2023-04-10"},"0.7.0 (2023-04-10)"),(0,i.mdx)("h2",{id:"new-features-8"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Add ",(0,i.mdx)("inlineCode",{parentName:"li"},"plotly_plot_density")," function: Plots interactive density plots of the\ngiven variables using kernel density estimation."),(0,i.mdx)("li",{parentName:"ul"},"Modified ",(0,i.mdx)("inlineCode",{parentName:"li"},"plotly_plot_dist")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"plot_dist")," to also support 'kde' plots. Also,\nthese are now the default options. This automatically percolates to\n",(0,i.mdx)("inlineCode",{parentName:"li"},"BalanceDF.plot()")," methods."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"Sample.from_frame"),' can now guess that a column called "weights" is a weight\ncolumn (instead of only guessing so if the column is called "weight").')),(0,i.mdx)("h2",{id:"bug-fixes-6"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fix ",(0,i.mdx)("inlineCode",{parentName:"li"},"rm_mutual_nas"),": it now remembers the index of pandas.Series that were\nused as input. This fixed erroneous plots produced by seaborn functions which\nuses rm_mutual_nas."),(0,i.mdx)("li",{parentName:"ul"},"Fix ",(0,i.mdx)("inlineCode",{parentName:"li"},"plot_hist_kde"),' to work when dist_type = "ecdf"'),(0,i.mdx)("li",{parentName:"ul"},"Fix ",(0,i.mdx)("inlineCode",{parentName:"li"},"plot_hist_kde")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"plot_bar"),' when having an input only with "self" and\n"target", by fixing ',(0,i.mdx)("inlineCode",{parentName:"li"},"_return_sample_palette"),".")),(0,i.mdx)("h2",{id:"misc-2"},"Misc"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"All plotting functions moved internally to expect weight column to be called\n",(0,i.mdx)("inlineCode",{parentName:"li"},"weight"),", instead of ",(0,i.mdx)("inlineCode",{parentName:"li"},"weights"),"."),(0,i.mdx)("li",{parentName:"ul"},"All adjust (ipw, cbps, poststratify, null) functions now export a dict with a\nkey called ",(0,i.mdx)("inlineCode",{parentName:"li"},"weight")," instead of ",(0,i.mdx)("inlineCode",{parentName:"li"},"weights"),".")),(0,i.mdx)("h2",{id:"contributors-7"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @SarigT"),(0,i.mdx)("h1",{id:"060-2023-04-05"},"0.6.0 (2023-04-05)"),(0,i.mdx)("h2",{id:"new-features-9"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Variance of the weighted mean",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Add the ",(0,i.mdx)("inlineCode",{parentName:"li"},"var_of_weighted_mean")," function (from\nbalance.stats_and_plots.weighted_stats import var_of_weighted_mean):\nComputes the variance of the weighted average (pi estimator for ratio-mean)\nof a list of values and their corresponding weights.",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Added the ",(0,i.mdx)("inlineCode",{parentName:"li"},"var_of_mean")," option to stat in the ",(0,i.mdx)("inlineCode",{parentName:"li"},"descriptive_stats")," function\n(based on ",(0,i.mdx)("inlineCode",{parentName:"li"},"var_of_weighted_mean"),")"),(0,i.mdx)("li",{parentName:"ul"},"Added the ",(0,i.mdx)("inlineCode",{parentName:"li"},".var_of_mean()")," method to BalanceDF."))),(0,i.mdx)("li",{parentName:"ul"},"Add the ",(0,i.mdx)("inlineCode",{parentName:"li"},"ci_of_weighted_mean")," function (from\nbalance.stats_and_plots.weighted_stats import ci_of_weighted_mean): Computes\nthe confidence intervals of the weighted mean using the (just added)\nvariance of the weighted mean.",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Added the ",(0,i.mdx)("inlineCode",{parentName:"li"},"ci_of_mean")," option to stat in the ",(0,i.mdx)("inlineCode",{parentName:"li"},"descriptive_stats")," function\n(based on ",(0,i.mdx)("inlineCode",{parentName:"li"},"ci_of_weighted_mean"),"). Also added kwargs support."),(0,i.mdx)("li",{parentName:"ul"},"Added the ",(0,i.mdx)("inlineCode",{parentName:"li"},".ci_of_mean()")," method to BalanceDF."),(0,i.mdx)("li",{parentName:"ul"},"Added the ",(0,i.mdx)("inlineCode",{parentName:"li"},".mean_with_ci()")," method to BalanceDF."),(0,i.mdx)("li",{parentName:"ul"},"Updated ",(0,i.mdx)("inlineCode",{parentName:"li"},".summary()")," methods to include the output of ",(0,i.mdx)("inlineCode",{parentName:"li"},"ci_of_mean"),"."))))),(0,i.mdx)("li",{parentName:"ul"},"All bar plots now have an added ylim argument to control the limits of the y\naxis. For example use:\n",(0,i.mdx)("inlineCode",{parentName:"li"},'plot_dist(dfs1, names=["self", "unadjusted", "target"], ylim = (0,1))')," Or\nthis: ",(0,i.mdx)("inlineCode",{parentName:"li"},"s3_null.covars().plot(ylim = (0,1))")),(0,i.mdx)("li",{parentName:"ul"},"Improve 'choose_variables' function to control the order of the returned\nvariables",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"The return type is now a list (and not a Tuple)"),(0,i.mdx)("li",{parentName:"ul"},"The order of the returned list is based on the variables argument. If it is\nnot supplied, it is based on the order of the column names in the\nDataFrames. The df_for_var_order arg controls which df to use."))),(0,i.mdx)("li",{parentName:"ul"},"Misc",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"The ",(0,i.mdx)("inlineCode",{parentName:"li"},"_prepare_input_model_matrix")," and downstream functions (e.g.:\n",(0,i.mdx)("inlineCode",{parentName:"li"},"model_matrix"),", ",(0,i.mdx)("inlineCode",{parentName:"li"},"sample.outcomes().mean()"),", etc) can now handle DataFrame\nwith special characters in the column names, by replacing special characters\nwith '","_","' (or '","_","i', if we end up with columns with duplicate names). It\nalso handles cases in which the column names have duplicates (using the new\n",(0,i.mdx)("inlineCode",{parentName:"li"},"_make_df_column_names_unique")," function)."),(0,i.mdx)("li",{parentName:"ul"},"Improve choose_variables to control the order of the returned variables",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"The return type is now a list (and not a Tuple)"),(0,i.mdx)("li",{parentName:"ul"},"The order of the returned list is based on the variables argument. If it\nis not supplied, it is based on column names in the DataFrames. The\ndf_for_var_order arg controls which df to use.")))))),(0,i.mdx)("h2",{id:"contributors-8"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @SarigT"),(0,i.mdx)("h1",{id:"050-2023-03-06"},"0.5.0 (2023-03-06)"),(0,i.mdx)("h2",{id:"new-features-10"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"The ",(0,i.mdx)("inlineCode",{parentName:"li"},"datasets.load_data"),' function now also supports the input "sim_data_cbps",\nwhich loads the simulated data used in the CBPS R vs Python tutorial. It is\nalso used in unit-testing to compare the CBPS weights produced from Python\n(i.e.: balance) with R (i.e.: the CBPS package). The testing shows how the\ncorrelation of the weights from the two implementations (both Pearson and\nSpearman) produce a correlation of >0.98.'),(0,i.mdx)("li",{parentName:"ul"},"cli improvements:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Add an option to set formula (as string) in the cli.")))),(0,i.mdx)("h2",{id:"documentation-6"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"New notebook (in the tutorial section):",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Comparing results of fitting CBPS between R's ",(0,i.mdx)("inlineCode",{parentName:"li"},"CBPS")," package and Python's\n",(0,i.mdx)("inlineCode",{parentName:"li"},"balance")," package (using simulated data).\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/comparing_cbps_in_r_vs_python_using_sim_data/"},"link"))))),(0,i.mdx)("h2",{id:"contributors-9"},"Contributors"),(0,i.mdx)("p",null,"@stevemandala, @talgalili, @SarigT"),(0,i.mdx)("h1",{id:"040-2023-02-08"},"0.4.0 (2023-02-08)"),(0,i.mdx)("h2",{id:"new-features-11"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added two new flags to the cli:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"--standardize_types"),": This gives cli users the ability to set the\n",(0,i.mdx)("inlineCode",{parentName:"li"},"standardize_types")," parameter in Sample.from_frame to True or False. To\nlearn more about this parameter, see:\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/api_reference/html/balance.sample_class.html#balance.sample_class.Sample.from_frame"},"https://import-balance.org/api_reference/html/balance.sample_class.html#balance.sample_class.Sample.from_frame")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"--return_df_with_original_dtypes"),": the Sample object now stores the dtypes\nof the original df that was read using Sample.from_frame. This can be used\nto restore the original dtypes of the file output from the cli. This is\nrelevant in cases in which we want to convert back the dtypes of columns\nfrom how they are stored in Sample, to their original types (e.g.: if\nsomething was Int32 it would be turned in float32 in balance.Sample, and\nusing the new flag will return that column, when using the cli, to be back\nin the Int32 type). This feature may not be robust to various edge cases. So\nuse with caution."))),(0,i.mdx)("li",{parentName:"ul"},"In the logging:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Added warnings about dtypes changes. E.g.: if using Sample.from_frame with a\ncolumn that has Int32, it will be turned into float32 in the internal\nstorage of sample. Now there will be a warning message indicating of this\nchange."),(0,i.mdx)("li",{parentName:"ul"},"Increase the default length of logger printing (from 500 to 2000)")))),(0,i.mdx)("h2",{id:"bug-fixes-7"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fix pandas warning: SettingWithCopyWarning in from_frame (and other places in\nsample_class.py)"),(0,i.mdx)("li",{parentName:"ul"},"sample.from_frame has a new argument ",(0,i.mdx)("inlineCode",{parentName:"li"},"use_deepcopy")," to decide if changes made\nto the df inside the sample object would also change the original df that was\nprovided to the sample object. The default is now set to ",(0,i.mdx)("inlineCode",{parentName:"li"},"True")," since it's\nmore likely that we'd like to keep the changes inside the sample object to the\ndf contained in it, and not have them spill into the original df.")),(0,i.mdx)("h2",{id:"contributors-10"},"Contributors"),(0,i.mdx)("p",null,"@SarigT, @talgalili"),(0,i.mdx)("h1",{id:"031-2023-02-01"},"0.3.1 (2023-02-01)"),(0,i.mdx)("h2",{id:"bug-fixes-8"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Sample.from_frame now also converts int16 and in8 to float16 and float16. Thus\nhelping to avoid ",(0,i.mdx)("inlineCode",{parentName:"li"},"TypeError: Cannot interpret 'Int16Dtype()' as a data type"),"\nstyle errors.")),(0,i.mdx)("h2",{id:"documentation-7"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added ISSUE_TEMPLATE")),(0,i.mdx)("h2",{id:"contributors-11"},"Contributors"),(0,i.mdx)("p",null,"@talgalili, @stevemandala, @SarigT"),(0,i.mdx)("h1",{id:"030-2023-01-30"},"0.3.0 (2023-01-30)"),(0,i.mdx)("h2",{id:"new-features-12"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added compatibility for Python 3.11 (by supporting SciPy 1.9.2) (props to\n@tomwagstaff-opml for flagging this issue)."),(0,i.mdx)("li",{parentName:"ul"},"Added the ",(0,i.mdx)("inlineCode",{parentName:"li"},"session-info")," package as a dependency.")),(0,i.mdx)("h2",{id:"bug-fixes-9"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fixed pip install from source on Windows machines (props to @tomwagstaff-opml\nfor the bug report).")),(0,i.mdx)("h2",{id:"documentation-8"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added ",(0,i.mdx)("inlineCode",{parentName:"li"},"session_info.show()")," outputs to the end of the three tutorials (at:\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/"},"https://import-balance.org/docs/tutorials/"),")"),(0,i.mdx)("li",{parentName:"ul"},"Misc updates to the README.")),(0,i.mdx)("h2",{id:"contributors-12"},"Contributors"),(0,i.mdx)("p",null,"@stevemandala, @SarigT, @talgalili"),(0,i.mdx)("h1",{id:"020-2023-01-19"},"0.2.0 (2023-01-19)"),(0,i.mdx)("h2",{id:"new-features-13"},"New Features"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"cli improvements:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Add an option to set weight_trimming_mean_ratio = None for no trimming."),(0,i.mdx)("li",{parentName:"ul"},"Add an option to set transformations to be None (i.e. no transformations)."))),(0,i.mdx)("li",{parentName:"ul"},"Add an option to adapt the title in:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"stats_and_plots.weighted_comparison_plots.plot_bar"),(0,i.mdx)("li",{parentName:"ul"},"stats_and_plots.weighted_comparison_plots.plot_hist_kde")))),(0,i.mdx)("h2",{id:"bug-fixes-10"},"Bug Fixes"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Fix (and simplify) balanceDF.plot to organize the order of groups (now\nunadjusted/self is left, adjusted/self center, and target is on the right)"),(0,i.mdx)("li",{parentName:"ul"},"Fix plotly functions to use the red color for self when only compared to\ntarget (since in that case it is likely unadjusted):\nbalance.stats_and_plots.weighted_comparisons_plots.plotly_plot_qq and\nbalance.stats_and_plots.weighted_comparisons_plots.plotly_plot_bar"),(0,i.mdx)("li",{parentName:"ul"},"Fix seaborn_plot_dist: output None by default (instead of axis object). Added\na return_Axes argument to control this behavior."),(0,i.mdx)("li",{parentName:"ul"},"Fix some test_cbps tests that were failing due to non-exact matches (we made\nthe test less sensitive)")),(0,i.mdx)("h2",{id:"documentation-9"},"Documentation"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"New blog section, with the post:\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/blog/2023/01/09/bringing-balance-to-your-data/"},'Bringing "balance" to your data ')),(0,i.mdx)("li",{parentName:"ul"},"New tutorial:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/quickstart_cbps/"},(0,i.mdx)("strong",{parentName:"a"},"quickstart_cbps"))," -\nlike the\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/quickstart/"},(0,i.mdx)("strong",{parentName:"a"},"quickstart")),"\ntutorial, but shows how to use the CBPS algorithm and compares the results\nto IPW (logistic regression with LASSO)."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/tutorials/balance_transformations_and_formulas/"},(0,i.mdx)("strong",{parentName:"a"},"balance_transformations_and_formulas"))," -\nThis tutorial showcases ways in which transformations, formulas and penalty\ncan be included in your pre-processing of the covariates before adjusting\nfor them."))),(0,i.mdx)("li",{parentName:"ul"},"API docs:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"New: highlighting on codeblocks"),(0,i.mdx)("li",{parentName:"ul"},"a bunch of text fixes."))),(0,i.mdx)("li",{parentName:"ul"},"Update README.md",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"logo"),(0,i.mdx)("li",{parentName:"ul"},"with contributors"),(0,i.mdx)("li",{parentName:"ul"},"typo fixes (props to @zbraiterman and @luca-martial)."))),(0,i.mdx)("li",{parentName:"ul"},'Added section about "Releasing a new version" to CONTRIBUTING.md',(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Available under\n",(0,i.mdx)("a",{parentName:"li",href:"https://import-balance.org/docs/docs/contributing/#releasing-a-new-version"},'"Docs/Contributing"'),"\nsection of website")))),(0,i.mdx)("h2",{id:"misc-3"},"Misc"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Added automated Github Action package builds & deployment to PyPi on release.",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"See\n",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/facebookresearch/balance/blob/main/.github/workflows/release.yml"},"release.yml"))))),(0,i.mdx)("h2",{id:"contributors-13"},"Contributors"),(0,i.mdx)("p",null,"@stevemandala, @SarigT, @talgalili"),(0,i.mdx)("h1",{id:"010-2022-11-20"},"0.1.0 (2022-11-20)"),(0,i.mdx)("h2",{id:"summary"},"Summary"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"balance released to the world!")),(0,i.mdx)("h2",{id:"contributors-14"},"Contributors"),(0,i.mdx)("p",null,"@SarigT, @talgalili, @stevemandala"))}p.isMDXComponent=!0},15680:(e,t,a)=>{a.r(t),a.d(t,{MDXContext:()=>m,MDXProvider:()=>u,mdx:()=>x,useMDXComponents:()=>p,withMDXComponents:()=>s});var n=a(96540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var m=n.createContext({}),s=function(e){return function(t){var a=p(t.components);return n.createElement(e,l({},t,{components:a}))}},p=function(e){var t=n.useContext(m),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(m.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,l=e.originalType,r=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),s=p(a),u=i,h=s["".concat(r,".").concat(u)]||s[u]||c[u]||l;return a?n.createElement(h,o(o({ref:t},m),{},{components:a})):n.createElement(h,o({ref:t},m))}));function x(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=a.length,r=new Array(l);r[0]=h;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var m=2;m<l;m++)r[m]=a[m];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"}}]);