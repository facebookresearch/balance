"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[859],{3905:function(e,t,r){r.r(t),r.d(t,{MDXContext:function(){return p},MDXProvider:function(){return c},mdx:function(){return g},useMDXComponents:function(){return m},withMDXComponents:function(){return d}});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o.apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=a.createContext({}),d=function(e){return function(t){var r=m(t.components);return a.createElement(e,o({},t,{components:r}))}},m=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=m(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=m(r),c=n,f=d["".concat(i,".").concat(c)]||d[c]||u[c]||o;return r?a.createElement(f,s(s({ref:t},p),{},{components:r})):a.createElement(f,s({ref:t},p))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var p=2;p<o;p++)i[p]=r[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}f.displayName="MDXCreateElement"},46744:function(e,t,r){r.r(t),r.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return m}});var a=r(83117),n=r(80102),o=(r(67294),r(3905)),i=["components"],s={id:"general_framework",title:"General Framework",description:"The main workflow of balance",sidebar_position:2,keywords:["framework"]},l=void 0,p={unversionedId:"docs/general_framework/general_framework",id:"docs/general_framework/general_framework",title:"General Framework",description:"The main workflow of balance",source:"@site/docs/docs/general_framework/general_framework.md",sourceDirName:"docs/general_framework",slug:"/docs/general_framework/",permalink:"/docs/docs/general_framework/",draft:!1,editUrl:"https://github.com/facebookresearch/balance/tree/main/website/docs/docs/general_framework/general_framework.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"general_framework",title:"General Framework",description:"The main workflow of balance",sidebar_position:2,keywords:["framework"]},sidebar:"docsSidebar",previous:{title:"Overview",permalink:"/docs/docs/overview"},next:{title:"Pre-Adjustment Diagnostics",permalink:"/docs/docs/general_framework/pre_adjustment_diagnostics"}},d={},m=[{value:"References",id:"references",level:2}],c={toc:m};function u(e){var t=e.components,s=(0,n.Z)(e,i);return(0,o.mdx)("wrapper",(0,a.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("p",null,"Following the ",(0,o.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Total_survey_error"},"total survey error")," framework, surveys responses are often biased due to coverage error, sampling error and non-response bias ","[1]",". Weighting is often an important step when analyzing survey data. For each unit in the sample (e.g. respondent to a survey), we attach a weight that can be understood as the approximate number of people from the target population that this respondent represents."),(0,o.mdx)("p",null,(0,o.mdx)("img",{alt:"total_survey_error_img",src:r(43800).Z,width:"4465",height:"1190"})),(0,o.mdx)("p",null,"The weighting of survey data through balance is done in 6 main steps:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("strong",{parentName:"li"},"Loading data of the respondents")," of the survey. This is done by loading a ",(0,o.mdx)("inlineCode",{parentName:"li"},"pandas")," DataFrame (using ",(0,o.mdx)("inlineCode",{parentName:"li"},"pandas.read_csv()")," for example), and then converting the DataFrame into a balance ",(0,o.mdx)("inlineCode",{parentName:"li"},"Sample")," class object:")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"sample = Sample.from_frame(sample_df)\n")),(0,o.mdx)("ol",{start:2},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("strong",{parentName:"li"},"Loading data about the target population")," we would like to correct for. Similarly to loading the respondents data, the next step is to load the target population data and keep it as a balance Sample object. Then, we combine the two ",(0,o.mdx)("inlineCode",{parentName:"li"},"Sample")," objects by setting the target object as the target of the sample object:")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"target = Sample.from_frame(target_df)\nsample_with_target = sample.set_target(target)\n")),(0,o.mdx)("ol",{start:3},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("strong",{parentName:"p"},"Diagnostics of the sample covariates")," so to evaluate whether weighting is needed. Several diagnostics tools are available to provide insights on the need to adjust the sample to match the target population. See the ",(0,o.mdx)("a",{parentName:"p",href:"/docs/docs/general_framework/pre_adjustment_diagnostics"},"Pre-Adjustment Diagnostics")," page for details.")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("strong",{parentName:"p"},"Adjusting the sample to the target"),". Producing the weights for sample to represent the target population distributions. See the  ",(0,o.mdx)("a",{parentName:"p",href:"/docs/docs/general_framework/adjusting_sample_to_population"},"Adjusting Sample to Population")," page for details."))),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"adjusted = sample_with_target.adjust()\n")),(0,o.mdx)("ol",{start:5},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("strong",{parentName:"p"},"Evaluation of the results"),". Several tools are available for evaluation of the resulted weights, the amount of bias that the weights reduce, and the estimated ",(0,o.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Design_effect#Haphazard_weights_with_estimated_ratio-mean_(%7F'%22%60UNIQ--postMath-0000003A-QINU%60%22'%7F)_-_Kish's_design_effect"},"design effect")," due to weighting. See the ",(0,o.mdx)("a",{parentName:"p",href:"/docs/docs/general_framework/evaluation_of_results"},"Evaluation of the Results")," page for details.")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("strong",{parentName:"p"},"Use the weights for producing population level estimations"),". The produced weights are then used to evaluate the population outcome, often the population average (first moment), by using:"))),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"adjusted.outcomes().summary()\n")),(0,o.mdx)("ol",{start:7},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("strong",{parentName:"li"},"Saving the output weights"),". To save the output weights, use:")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"adjusted.to_download()\n")),(0,o.mdx)("p",null,"All these steps are described in more details in the rest of this website. Examples are available in the ",(0,o.mdx)("a",{parentName:"p",href:"../../tutorials"},"tutorials section"),".\nFor a quick start of using balance with your survey data, take a look at this ",(0,o.mdx)("a",{parentName:"p",href:"/docs/tutorials/quickstart"},"notebook")),(0,o.mdx)("h2",{id:"references"},"References"),(0,o.mdx)("p",null,"[1]"," Salganik, Matthew J. 2017. Bit by Bit: Social Research in the Digital Age. Princeton, NJ: Princeton University Press. Open review edition."))}u.isMDXComponent=!0},43800:function(e,t,r){t.Z=r.p+"assets/images/total_survey_error_flow_v02-8d960b0d2ccd51131c7dd0d77aff3bf7.png"}}]);